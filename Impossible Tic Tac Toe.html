<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Impossible Tic Tac Toe</title>
<style>
/* === Change these colors === */
:root {
    --x-color: #0408ff;  /* X color */
    --o-color: #ff0044;  /* O color */
    --board-gradient-start: #8A2BE2;  /* Board top color */
    --board-gradient-end: #FF69B4;    /* Board bottom color */
    --header-color: #FFD700;          /* Header color */
}

body {
    font-family: 'Arial', sans-serif;
    background: #1a1a1a;
    color: #fff;
    text-align: center;
    padding: 50px;
}

h1 {
    font-size: 48px;
    color: var(--header-color);
    margin-bottom: 20px;
}

#status {
    font-size: 24px;
    margin-bottom: 20px;
}

/* Board */
#board {
    display: grid;
    grid-template-columns: repeat(3, 120px);
    grid-gap: 12px;
    justify-content: center;
    margin-bottom: 30px;
}

.square {
    width: 120px;
    height: 120px;
    font-size: 64px;
    font-weight: bold;
    cursor: pointer;
    background: linear-gradient(145deg, var(--board-gradient-start), var(--board-gradient-end));
    border-radius: 15px;
    border: 2px solid #fff;
    color: var(--x-color); /* X default color */
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s, background 0.2s;
}

.square:hover {
    transform: scale(1.1);
    background: linear-gradient(145deg, var(--board-gradient-end), var(--board-gradient-start));
}

/* Reset button */
#reset {
    padding: 12px 25px;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    background: var(--o-color);  /* Reset button color */
    color: #fff;
    border: 2px solid #fff;
    border-radius: 8px;
    transition: transform 0.2s, background 0.2s;
}

#reset:hover {
    transform: scale(1.05);
}
</style>
</head>
<body>

<h1>Impossible Tic Tac Toe</h1>
<div id="status">Your turn: X</div>

<div id="board">
  <div class="square" data-index="0"></div>
  <div class="square" data-index="1"></div>
  <div class="square" data-index="2"></div>
  <div class="square" data-index="3"></div>
  <div class="square" data-index="4"></div>
  <div class="square" data-index="5"></div>
  <div class="square" data-index="6"></div>
  <div class="square" data-index="7"></div>
  <div class="square" data-index="8"></div>
</div>

<button id="reset">Reset Game</button>

<script>
const squares = document.querySelectorAll(".square");
const status = document.getElementById("status");

const X_COLOR = getComputedStyle(document.documentElement).getPropertyValue('--x-color').trim();
const O_COLOR = getComputedStyle(document.documentElement).getPropertyValue('--o-color').trim();

let board = Array(9).fill(null);
let playerTurn = true; // X = player, O = AI

function checkWinner(b) {
  const lines = [
    [0,1,2],[3,4,5],[6,7,8],
    [0,3,6],[1,4,7],[2,5,8],
    [0,4,8],[2,4,6]
  ];
  for (let [a,b1,c] of lines) {
    if (b[a] && b[a] === b[b1] && b[a] === b[c]) return b[a];
  }
  return null;
}

// Minimax AI
function minimax(newBoard, isMaximizing) {
  const winner = checkWinner(newBoard);
  if (winner === "O") return { score: 10 };
  if (winner === "X") return { score: -10 };
  if (newBoard.every(cell => cell)) return { score: 0 };

  const scores = [], moves = [];
  for (let i = 0; i < 9; i++) {
    if (!newBoard[i]) {
      const boardCopy = newBoard.slice();
      boardCopy[i] = isMaximizing ? "O" : "X";
      const result = minimax(boardCopy, !isMaximizing);
      scores.push(result.score);
      moves.push(i);
    }
  }

  if (isMaximizing) {
    const maxIndex = scores.indexOf(Math.max(...scores));
    return { score: scores[maxIndex], index: moves[maxIndex] };
  } else {
    const minIndex = scores.indexOf(Math.min(...scores));
    return { score: scores[minIndex], index: moves[minIndex] };
  }
}

function aiMove() {
  const bestMove = minimax(board, true).index;
  board[bestMove] = "O";
  const s = squares[bestMove];
  s.textContent = "O";
  s.style.color = O_COLOR;
}

function handleClick(e) {
  const index = e.target.dataset.index;
  if (!playerTurn || board[index] || checkWinner(board)) return;

  board[index] = "X";
  const s = squares[index];
  s.textContent = "X";
  s.style.color = X_COLOR;

  let winner = checkWinner(board);
  if (winner || board.every(v => v !== null)) {
    playerTurn = false;
    status.textContent = winner ? (winner==="X"?"You Win!":"AI Wins!") : "Draw!";
    return;
  }

  playerTurn = false;
  status.textContent = "AI is thinking...";
  setTimeout(() => {
    aiMove();
    winner = checkWinner(board);
    if (winner || board.every(v => v !== null)) {
      playerTurn = false;
      status.textContent = winner ? (winner==="X"?"You Win!":"AI Wins!") : "Draw!";
    } else {
      status.textContent = "Your turn: X";
      playerTurn = true;
    }
  }, 500);
}

squares.forEach(s => s.addEventListener("click", handleClick));

document.getElementById("reset").addEventListener("click", () => {
  board.fill(null);
  squares.forEach(s => s.textContent = "");
  playerTurn = true;
  status.textContent = "Your turn: X";
});
</script>

</body>
</html>
